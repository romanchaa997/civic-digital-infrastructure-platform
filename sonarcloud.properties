# SonarCloud Configuration for Civic Digital Infrastructure Platform
# SAST scanning, code quality gates, and security hotspot detection

# Project identification
sonar.projectKey=civic-digital-infrastructure
sonar.projectName=Civic Digital Infrastructure Platform
sonar.projectVersion=1.0.0

# Source code directories
sonar.sources=src
sonar.tests=src/__tests__
sonar.test.inclusions=**/*.test.ts,**/*.spec.ts
sonar.test.exclusions=**/node_modules/**

# Language and runtime
sonar.language=ts
sonar.typescript.node_modules.path=node_modules
sonar.sourceEncoding=UTF-8

# Code coverage
sonar.coverage.exclusions=**/*.test.ts,**/*.spec.ts,src/**/*.mock.ts
sonar.typescript.lcov.reportPaths=coverage/lcov.info
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# Quality gates and thresholds
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# Code smell and maintainability
sonar.javascript.node_modules=node_modules
sonar.typescript.tslint.configPath=tslint.json
sonar.typescript.eslint.enabled=true
sonar.typescript.eslint.configPath=.eslintrc.js

# Security rules
sonar.security.reportFilePath=report.sarif
sonar.externalIssuesReportPaths=external-issues.json

# Exclusions
sonar.exclusions=**/node_modules/**,**/dist/**,**/*.d.ts,coverage/**
sonar.duplications.skip=false
sonar.cpd.exclusions=**/node_modules/**,**/dist/**

# Hotspot rules
sonar.security.hotspots.enabled=true
sonar.security.hotspots.reportFilePath=security-hotspots.json

# Performance and analysis
sonar.sourceEncoding=UTF-8
sonar.verbose=false
sonar.analysis.mode=publish

# Authentication (uses SONAR_HOST_URL and SONAR_LOGIN env vars)
# sonar.host.url=https://sonarcloud.io
# sonar.login=${SONAR_LOGIN}

# Organization configuration (SonarCloud)
sonar.organization=civic-digital

# Branch analysis
sonar.branch.name=main
sonar.branch.target=main

# Pull request analysis
# sonar.pullrequest.branch=${CI_COMMIT_REF_NAME}
# sonar.pullrequest.base=main
# sonar.pullrequest.key=${CI_COMMIT_REF_NAME}

# Strictness and validation
sonar.strictmode=true
sonar.strict.rules=true
